<!DOCTYPE html>
<html lang="en">
<head>
    <meta content="width=device-width, initial-scale=1" charset="utf-8" name="viewport" />

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-serialize-object/2.5.0/jquery.serialize-object.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/purl/2.3.1/purl.min.js"></script>

    <link rel="icon" href="favicon.png" type="image/x-icon"/>

    <title>FlipBook: 16-63084043-63084067-TG_expansion_hunter</title>
    <style>
        .img-default-view {
            cursor: zoom-in;
            max-width: 100% !important;
        }
        .img-zoomed-in-view {
            cursor: zoom-out;
        }
        .ui.grid>.row>.column>img, .ui.grid>.row>img {
            max-width: unset;
        }
        .keyboard-shortcut {
            border-color: rgba(0, 0, 0, 0.55);
            border-style: solid;
            border-width: 1px;
            border-radius: 5px;
            padding: 1px 4px 2px;
            margin-left: 0.5em;
            color: rgba(0, 0, 0, 0.55);
            font-size: 0.8em;
        }
        .disabled-link {
            color: #AAA;
            pointer-events: none;
        }
    </style>
</head>
<body style="overflow-x: scroll">
    
    <a id="top" name="top"></a>
    <div class="ui stackable grid" style="margin-top: 1px">
        <div class="row">
            <div class="one wide column"></div>
            <div class="fourteen wide column">
                

                <div class="ui stackable grid">
                    <div class="row">
                        <div class="three wide column" style="white-space: nowrap; min-width: 220px">
                            <a id="prevlink"
                               href="page_16-60884902-60884912-TA_expansion_hunter_with_adjacent_loci__max_dist_50bp.html"
                               class=""
                               style="white-space: nowrap">
                                <span style="margin-right: 10px" class="keyboard-shortcut">&lt; or [</span>
                                <i class="arrow left icon"></i> &nbsp; prev
                            </a>
                            &nbsp; &nbsp;
                            <a id="nextlink"
                               href="page_16-63084043-63084067-TG_expansion_hunter_with_adjacent_loci__max_dist_50bp.html"
                               class=""
                               style="white-space: nowrap">
                                next &nbsp; <i class="arrow right icon"></i>
                                <span style="margin-left: 10px" class="keyboard-shortcut">] or &gt;</span>
                            </a>
                        </div>
                        <div class="three wide column">
                            <span style="margin-left: 30px">
                                <a id="homelink" href="./index.html" style="white-space: nowrap">
                                    <i class="home icon"></i> &nbsp; table
                                    <!-- span style="margin-left: 10px" class="keyboard-shortcut">h or t</span -->
                                </a>
                            </span>
                        </div>
                        <div class="four wide column" style="text-align:center">
                            <b>page #133 of 200: &nbsp; 16-63084043-63084067-TG_expansion_hunter</b>
                        </div>
                        <div class="six wide column">
                            
                            
                        </div>
                    </div>
                </div>
                
                    <div class="ui divider"></div>
                    
                        <div style="margin-left: 10px; display: inline-block"><b>LocusId</b>: 16-63084043-63084067-TG</div>
                    
                        <div style="margin-left: 10px; display: inline-block"><b>Motif</b>: TG</div>
                    
                        <div style="margin-left: 10px; display: inline-block"><b>CanonicalMotif</b>: AC</div>
                    
                        <div style="margin-left: 10px; display: inline-block"><b>MotifSize</b>: 2</div>
                    
                        <div style="margin-left: 10px; display: inline-block"><b>Genotype: Truth</b>: 8/12</div>
                    
                        <div style="margin-left: 10px; display: inline-block"><b>Genotype: ExpansionHunter: with adjacent repeats</b>: 8/15</div>
                    
                        <div style="margin-left: 10px; display: inline-block"><b>DiffRepeats: Allele 1: ExpansionHunter - Truth: with adjacent repeats</b>: 0.0</div>
                    
                        <div style="margin-left: 10px; display: inline-block"><b>DiffRepeats: Allele 2: ExpansionHunter - Truth: with adjacent repeats</b>: 3.0</div>
                    
                        <div style="margin-left: 10px; display: inline-block"><b>DiffRepeats: Allele 1 + 2: ExpansionHunter - Truth: with adjacent repeats</b>: 3.0</div>
                    
                        <div style="margin-left: 10px; display: inline-block"><b>Q: Allele 1: ExpansionHunter: with adjacent repeats</b>: 1.0</div>
                    
                        <div style="margin-left: 10px; display: inline-block"><b>Q: Allele 2: ExpansionHunter: with adjacent repeats</b>: 1.0</div>
                    
                        <div style="margin-left: 10px; display: inline-block"><b>Genotype: ExpansionHunter: no adjacent repeats</b>: 8/12</div>
                    
                        <div style="margin-left: 10px; display: inline-block"><b>DiffRepeats: Allele 1: ExpansionHunter - Truth: no adjacent repeats</b>: 0.0</div>
                    
                        <div style="margin-left: 10px; display: inline-block"><b>DiffRepeats: Allele 2: ExpansionHunter - Truth: no adjacent repeats</b>: 0.0</div>
                    
                        <div style="margin-left: 10px; display: inline-block"><b>DiffRepeats: Allele 1 + 2: ExpansionHunter - Truth: no adjacent repeats</b>: 0.0</div>
                    
                        <div style="margin-left: 10px; display: inline-block"><b>Q: Allele 1: ExpansionHunter: no adjacent repeats</b>: 1.0</div>
                    
                        <div style="margin-left: 10px; display: inline-block"><b>Q: Allele 2: ExpansionHunter: no adjacent repeats</b>: 1.0</div>
                    
                        <div style="margin-left: 10px; display: inline-block"><b>Verdict</b>: both genotypes bad</div>
                    
                        <div style="margin-left: 10px; display: inline-block"><b>Notes</b>: </div>
                    
                
                
                    <div class="ui divider"></div>
                    <form class="ui form" onsubmit="return false">
                        <input type="hidden" name="relative_directory" value="16-63084043-63084067-TG_expansion_hunter" />
                        <div class="inline fields ui grid" style="white-space: nowrap">
                            
                            
                                
                                    <label for="verdict" style="margin: 5px 0px 5px 10px">
                                        Verdict
                                    </label>
                                    
                                        <div class="field">
                                            <div class="ui radio checkbox">
                                                <input type="radio"
                                                       name="verdict"
                                                       value="better_with_adjacent_repeats"
                                                       class="hidden"
                                                       tabindex="1000"
                                                       autofocus
                                                       
                                                >
                                                <label>Better with adjacent repeats</label>
                                            </div>
                                        </div>
                                        
                                    
                                        <div class="field">
                                            <div class="ui radio checkbox">
                                                <input type="radio"
                                                       name="verdict"
                                                       value="worse_with_adjacent_repeats"
                                                       class="hidden"
                                                       tabindex="1001"
                                                       autofocus
                                                       
                                                >
                                                <label>Worse with adjacent repeats</label>
                                            </div>
                                        </div>
                                        
                                    
                                        <div class="field">
                                            <div class="ui radio checkbox">
                                                <input type="radio"
                                                       name="verdict"
                                                       value="both_genotyopes_bad"
                                                       class="hidden"
                                                       tabindex="1002"
                                                       autofocus
                                                       
                                                >
                                                <label>Both genotypes are low quality</label>
                                            </div>
                                        </div>
                                        
                                    
                                        <div class="field">
                                            <div class="ui radio checkbox">
                                                <input type="radio"
                                                       name="verdict"
                                                       value="ambiguous"
                                                       class="hidden"
                                                       tabindex="1003"
                                                       autofocus
                                                       
                                                >
                                                <label>Unclear</label>
                                            </div>
                                        </div>
                                        
                                    
                                
                                
                            
                                
                                    <div class="field" style="margin: 5px 0px 5px 35px">
                                        <input type="text"
                                               name="notes"
                                               size="50"
                                               placeholder="Notes"
                                               value=""
                                               tabindex="1004"
                                               autofocus
                                        >
                                    </div>
                                    
                                
                                
                            

                            <div id="save-button" class="ui secondary basic button" style="margin: 5px 0px 5px 15px">Save</div>
                            <div id="save-status" style="display: none; margin: 5px 0px">
                                <i class="icon"></i>
                            </div>

                            <!-- div style="margin: 15px 0px 15px 35px" class="ui submit button">Save</div -->
                        </div>
                    </form>
                
                
                
                
                    <div class="ui divider"></div>
                    <a name="section1"></a>
                    <div style="margin: 10px">
                        <b>16-63084043-63084067-TG_expansion_hunter/CHM1_CHM13_WGS2.16-63084043-63084067-TG.svg</b>
                        
                    </div>

                    <img class="img-default-view" src="16-63084043-63084067-TG_expansion_hunter/CHM1_CHM13_WGS2.16-63084043-63084067-TG.svg?cache=1690921490" tabindex="1"/>
                    
                    
                
                
            </div>
            <div class="one wide column"></div>
        </div>
    </div>
    <script type="text/javascript">
      //add path to url to so that saved links or bookmarks can be robust to different sort orders
      

      //misc. init
      $('.ui.radio.checkbox').checkbox();

      $('.img-default-view').on('keypress click', (event) => {
        if (event.type === 'click' || event.which === 13 || event.which === 32 || event.which === 43 || event.which === 35) {
            $(event.target).toggleClass('img-default-view img-zoomed-in-view')
        }
      })

      //form submission
      const apiSpec = {
        url: '/save',
        interruptRequests: true,
        method : 'POST',
        on: 'click',
        serializeForm: true,
        throttleFirstRequest: false,
        throttle: 250,
        beforeSend: function(settings) {
          console.log('Saving', settings.data)
          return settings
        },
        onRequest: function(request) {
          $('#save-status i').attr('class', 'spinner loading icon')
          $('#save-status i').attr('style', 'color:#666666')
          $('#save-status span').text('Saving...')
          $('#save-status').show()
        },
        onComplete: function(response) {
          // always called after XHR complete
          $('#save-status').delay(500).fadeOut('slow');
        },
        onSuccess: function(response) {
          // valid response and response.success = true
          //console.log("onSuccess", response)
          $('#save-status i').attr('class', 'check circle icon')
          $('#save-status i').attr('style', 'color:#00AA00')
          $('#save-status span').text('Saved')
          $('#save-status').show()
        },
        onFailure: function(response) {
          // request failed, or valid response but response.success = false
          //console.log("onFailure", response)
          $('#save-status i').attr('class', 'exclamation circle icon')
          $('#save-status i').attr('style', 'color:#FF0000')
          $('#save-status span').text(`Couldn't save ${response.error}`)
          $('#save-status').show()
        },
      }
      //$('form input[type=text]').api(apiSpec)
      $('.form .ui.radio').api(apiSpec)
      $('.form #save-button').api(apiSpec)

      //keyboard shortcuts
      const navigationKeyToSelectorMap = {
        "[": "#prevlink",
        "<": "#prevlink",
        //"p": "#prevlink",
        //"P": "#prevlink",
        "%": "#prevlink",  // left arrow ("%" == String.fromCharCode(37))
        "]": "#nextlink",
        ">": "#nextlink",
        //"n": "#nextlink",
        //"N": "#nextlink",
        "'": "#nextlink",  // right arrow ("'" == String.fromCharCode(39))
        //"h": "#homelink",
        //"t": "#homelink",
      }

      const formKeyToSelectorMap = {}
      
      formKeyToSelectorMap["B"] = "input[value='both_genotyopes_bad']"
      
      formKeyToSelectorMap["W"] = "input[value='worse_with_adjacent_repeats']"
      
      formKeyToSelectorMap["U"] = "input[value='ambiguous']"
      

      const keyToSelectorMap = Object.assign({}, formKeyToSelectorMap, navigationKeyToSelectorMap)

      //handle arrow keys
      $(document).keydown((event) => {
        const key = event.key
        //console.log(event.target.tagName, event.target.type, ": key", key, 'keyCode: ', String.fromCharCode(event.keyCode), " (", event.keyCode, ") down")
        if (key == "Meta" || key == "Control" || key == "Alt" || event.keyCode == 8) {
            // trigger form save and return immediately for meta and delete keys. This enables expected behavior for Commmand-C, Command-V and similar shortcuts
            // $('form input[type=text]').api(Object.assign({}, apiSpec, {on: 'now'}))
            return
        }
        //else {
        //    $('form input[type=text]').api(apiSpec)
        //}

        if (event.keyCode == 13) {
          // 13 == Enter key
          $('form input[type=text]').api(Object.assign({}, apiSpec, {on: 'now'}))
          return
        }

        if ((event.target.tagName || '').toLowerCase() == 'input' && event.target.type == 'text') {
          return
        }

        if (key) {
            const selector = keyToSelectorMap[key]
            //console.log('selector', selector)
            if (selector) {
                const obj = $(selector)
                if (obj.length > 0) {
                    //for some objects you need [0], while for others it only works with obj.click()
                    obj[0].click()
                    obj.click()
                    return
                } else {
                    console.warn(`Selector not found: ${selector}`)
                }
            }
        }

        if (/^[a-zA-Z0-9-_ ]$/.test(key) && !(key.toLowerCase() in keyToSelectorMap) && !(key.toUpperCase() in keyToSelectorMap)) {
            //console.log(`Focus triggered by ${key}`)
            $("input[type=text]").focus()
        }

        switch (event.keyCode) {
          case 37:
            $('#prevlink')[0].click()
            break
          case 39:
            $('#nextlink')[0].click()
            break
        }

        // prevent arrow keys from selecting radio buttons
        if (event.keyCode >= 37 && event.keyCode <= 40 && (event.target.tagName || '').toLowerCase() == 'input' && event.target.type == 'radio') {
          return false
        }
      })
    </script>
</body>
</html>